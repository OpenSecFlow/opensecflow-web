---
interface Challenge {
  problem: string;
  solution: string;
  solutionDetails: string;
}

const challenges: Challenge[] = [
  {
    problem: 'Scripting SSH is fragile/slow',
    solution: 'Persistent Session Management',
    solutionDetails: 'NetDriver maintains open SSH connections across multiple command executions, eliminating connection overhead and enabling low-latency command execution.',
  },
  {
    problem: 'Config collisions',
    solution: 'Intelligent Command Queuing',
    solutionDetails: 'NetDriver\'s intelligent queuing system prevents configuration collisions by serializing operations and detecting potential conflicts before execution.',
  },
  {
    problem: 'Legacy Gear in Web Apps',
    solution: 'HTTP RESTful Wrapper',
    solutionDetails: 'NetDriver provides an HTTP RESTful wrapper that transforms legacy CLI interfaces into modern REST APIs, enabling seamless integration with web applications.',
  },
  {
    problem: 'Slow updates at scale',
    solution: 'AsyncSSH Core',
    solutionDetails: 'Built on AsyncSSH, NetDriver enables concurrent operations across hundreds of devices simultaneously, dramatically improving automation throughput.',
  },
];
---



<script>
  // Alpine.js is not included, so we'll use vanilla JavaScript for accordion functionality
  document.addEventListener('DOMContentLoaded', () => {
    const accordionButtons = document.querySelectorAll('[aria-controls^="challenge-"]');
    
    accordionButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const targetId = button.getAttribute('aria-controls');
        if (!targetId) return;
        const target = document.getElementById(targetId);
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        
        // Close all other accordions
        accordionButtons.forEach((otherButton) => {
          if (otherButton !== button) {
            const otherTargetId = otherButton.getAttribute('aria-controls');
            if (!otherTargetId) return;
            const otherTarget = document.getElementById(otherTargetId);
            if (otherTarget) {
              otherTarget.style.display = 'none';
              otherButton.setAttribute('aria-expanded', 'false');
              const svg = otherButton.querySelector('svg');
              if (svg) svg.style.transform = 'rotate(0deg)';
            }
          }
        });
        
        // Toggle current accordion
        if (target) {
          if (isExpanded) {
            target.style.display = 'none';
            button.setAttribute('aria-expanded', 'false');
            const svg = button.querySelector('svg');
            if (svg) svg.style.transform = 'rotate(0deg)';
          } else {
            target.style.display = 'block';
            button.setAttribute('aria-expanded', 'true');
            const svg = button.querySelector('svg');
            if (svg) svg.style.transform = 'rotate(180deg)';
          }
        }
      });
    });
    
    // Initialize first accordion as open
    const firstButton = accordionButtons[0];
    if (firstButton) {
      const firstTargetId = firstButton.getAttribute('aria-controls');
      if (firstTargetId) {
        const firstTarget = document.getElementById(firstTargetId);
        if (firstTarget) {
          firstTarget.style.display = 'block';
          firstButton.setAttribute('aria-expanded', 'true');
          const svg = firstButton.querySelector('svg');
          if (svg) svg.style.transform = 'rotate(180deg)';
        }
      }
    }
  });
</script>
